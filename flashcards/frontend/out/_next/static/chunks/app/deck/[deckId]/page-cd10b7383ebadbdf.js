(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[296],{8053:function(e,t,r){Promise.resolve().then(r.bind(r,90029))},90029:function(e,t,r){"use strict";r.r(t),r.d(t,{DeckPageClient:function(){return u}});var n=r(37821),s=r(46179),i=r(58078),d=r(37179),c=r(14171),l=r(85013),a=r(66232),o=r(48551);function u(){let e=(0,s.useParams)(),t=(0,s.useRouter)(),r=e.deckId,{setDeck:u,localDecks:m,loadLocalDecks:h,currentlySelectedDeck:x}=(0,l.S)(),{isLoggedIn:f,loading:b}=(0,a.t)(),[j,v]=(0,i.useState)(!0),[k,p]=(0,i.useState)(!1),N=(0,i.useRef)(null),g=(0,i.useRef)(!1);return((0,i.useEffect)(()=>{g.current||(h(),g.current=!0)},[h]),(0,i.useEffect)(()=>{if("placeholder"===r){t.replace("/");return}if(!b){if(N.current===r&&(null==x?void 0:x.id)===r){v(!1);return}if((null==x?void 0:x.id)===r){N.current=r,v(!1);return}(async function(){v(!0),p(!1);let e=m.find(e=>e.id===r);if(e&&e.cards){u({id:e.id,userId:e.userId,title:e.title,isPublic:e.isPublic,createdAt:e.createdAt,lastModified:e.lastModified,cards:e.cards}),N.current=r,v(!1);return}try{let e=await o.h.getDeck(r,f);e?(u(e),N.current=r):p(!0),v(!1)}catch(e){console.error("Failed to fetch deck:",e),p(!0),v(!1)}})()}},[r,m,f,b,u,t,null==x?void 0:x.id]),j)?(0,n.jsx)(d.Z,{children:(0,n.jsx)("div",{className:"flex items-center justify-center min-h-[60vh] md:ml-64",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 mx-auto mb-4 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,n.jsx)("p",{className:"text-gray-500",children:"Loading deck..."})]})})}):k?(0,n.jsx)(d.Z,{children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4 md:ml-64",children:[(0,n.jsx)("div",{className:"w-20 h-20 mb-6 rounded-full bg-red-100 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Deck Not Found"}),(0,n.jsx)("p",{className:"text-gray-500 max-w-md mb-6",children:"The deck you're looking for doesn't exist or may have been deleted."}),(0,n.jsx)("button",{onClick:()=>t.push("/"),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 transition-all",children:"Go to Home"})]})}):x?(0,n.jsx)(d.Z,{children:(0,n.jsx)(c.U,{})}):(0,n.jsx)(d.Z,{children:(0,n.jsx)("div",{className:"flex items-center justify-center min-h-[60vh] md:ml-64",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 mx-auto mb-4 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,n.jsx)("p",{className:"text-gray-500",children:"Loading deck..."})]})})})}}},function(e){e.O(0,[854,881,120,894,271,425,672,115,141,744],function(){return e(e.s=8053)}),_N_E=e.O()}]);